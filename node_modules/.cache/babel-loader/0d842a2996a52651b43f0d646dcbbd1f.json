{"ast":null,"code":"import _defineProperty from \"/Users/kevinfoesenek/Desktop/LinkedFC_frontend/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/Users/kevinfoesenek/Desktop/LinkedFC_frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/kevinfoesenek/Desktop/LinkedFC_frontend/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/kevinfoesenek/Desktop/LinkedFC_frontend/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/kevinfoesenek/Desktop/LinkedFC_frontend/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/kevinfoesenek/Desktop/LinkedFC_frontend/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/kevinfoesenek/Desktop/LinkedFC_frontend/src/views/Liquidations.jsx\";\n\n/*!\n\n=========================================================\n* Black Dashboard React v1.0.0\n=========================================================\n\n* Product Page: https://www.creative-tim.com/product/black-dashboard-react\n* Copyright 2019 Creative Tim (https://www.creative-tim.com)\n* Licensed under MIT (https://github.com/creativetimofficial/black-dashboard-react/blob/master/LICENSE.md)\n\n* Coded by Creative Tim\n\n=========================================================\n\n* The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\n\n*/\nimport React from \"react\";\nimport { Button, Card, CardHeader, CardBody, CardTitle, Row, Col, Table, Modal } from \"reactstrap\";\n\nvar Liquidations =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Liquidations, _React$Component);\n\n  function Liquidations(props) {\n    var _this;\n\n    _classCallCheck(this, Liquidations);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Liquidations).call(this, props));\n\n    _this.toggleModal = function (modalState, owner, id) {\n      var _this$setState;\n\n      var web3 = _this.props.web3;\n      var instanceColl = _this.props.instanceColl;\n\n      _this.setState((_this$setState = {}, _defineProperty(_this$setState, modalState, !_this.state[modalState]), _defineProperty(_this$setState, \"dataMiniModal\", [owner, id]), _this$setState));\n\n      if (owner !== undefined && id !== undefined) {\n        if (_this.props.web3Available !== \"false\") {\n          web3.eth.getCoinbase().then(function (result) {\n            return instanceColl.methods.CP(owner, id).call().then(function (result) {\n              return _this.setState({\n                userCP: result\n              });\n            });\n          });\n        }\n\n        ;\n      }\n    };\n\n    _this.liquidateCP = function (owner, id) {\n      var web3 = _this.props.web3;\n      var instanceColl = _this.props.instanceColl;\n\n      if (_this.props.web3Available !== \"false\") {\n        web3.eth.getCoinbase().then(function (result) {\n          return instanceColl.methods.liquidateCP(_this.state.dataMiniModal[0], _this.state.dataMiniModal[1]).send({\n            from: result\n          });\n        });\n      }\n\n      ;\n    };\n\n    _this.state = {\n      liqActive: [],\n      miniModal: false,\n      userCP: \"\",\n      liqRange: []\n    };\n    return _this;\n  }\n\n  _createClass(Liquidations, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      var liqrate = this.props.rateUSD / 1000;\n\n      if (this.props.web3Available === \"true\") {\n        for (var i = liqrate; i < this.props.liqGroups.length; i++) {\n          if (this.props.liqGroups[i] > 0) {\n            for (var n = 0; n < this.props.liqGroups[i]; n++) {\n              this.props.instanceColl.methods._LiqInfo(i, n + 1).call().then(function (result) {\n                return _this2.setState({\n                  liqActive: _this2.state.liqActive.concat(result)\n                });\n              });\n            }\n          }\n        }\n      }\n    }\n  }, {\n    key: \"renderTableGroupData\",\n    value: function renderTableGroupData() {\n      var rows = [];\n\n      if (this.props.loop === 49) {\n        for (var i = 0; i < this.props.liqGroups.length; i++) {\n          if (this.props.liqGroups[i] > 0) {\n            rows[i] = React.createElement(\"tr\", {\n              key: i,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 84\n              },\n              __self: this\n            }, React.createElement(\"td\", {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 86\n              },\n              __self: this\n            }, i * 10, \" - \", (i + 1) * 10, \" USD\"), React.createElement(\"td\", {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 87\n              },\n              __self: this\n            }, this.props.liqGroups[i], \" CPs\"));\n          }\n\n          ;\n        }\n\n        return rows;\n      } else {\n        return React.createElement(\"tr\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 92\n          },\n          __self: this\n        }, React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 92\n          },\n          __self: this\n        }, \"loading liquidation groups\"), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 92\n          },\n          __self: this\n        }));\n      }\n    }\n  }, {\n    key: \"renderTableActiveLiqData\",\n    value: function renderTableActiveLiqData() {\n      var rowsActive = [];\n      var liqrate = this.props.rateUSD / 1000;\n      var index = 0;\n\n      for (var i = liqrate; i < this.props.liqGroups.length; i++) {\n        if (this.props.liqGroups[i] > 0) {\n          index = index + this.props.liqGroups[i] * 1;\n        }\n      }\n\n      if (index > 0) {\n        if (this.props.loop === 49) {\n          for (var n = 0; n < index; n++) {\n            rowsActive[n] = React.createElement(\"tr\", {\n              key: n,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 109\n              },\n              __self: this\n            }, React.createElement(\"td\", {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 110\n              },\n              __self: this\n            }, n + 1), this.state.liqActive[n] !== undefined ? React.createElement(\"td\", {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 112\n              },\n              __self: this\n            }, this.state.liqActive[n][1]) : React.createElement(\"td\", {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 112\n              },\n              __self: this\n            }), this.state.liqActive[n] !== undefined ? React.createElement(\"td\", {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 115\n              },\n              __self: this\n            }, this.state.liqActive[n][0] * 1 + 1) : React.createElement(\"td\", {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 115\n              },\n              __self: this\n            }), this.state.liqActive[n] !== undefined ? React.createElement(\"td\", {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 117\n              },\n              __self: this\n            }, React.createElement(Button, {\n              className: \"btn-link tim-icons icon-simple-remove\",\n              color: \"danger\",\n              onClick: this.toggleModal.bind(\"\", \"miniModal\", this.state.liqActive[n][1], this.state.liqActive[n][0]),\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 118\n              },\n              __self: this\n            })) : React.createElement(\"td\", {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 126\n              },\n              __self: this\n            }));\n          }\n\n          return rowsActive;\n        } else {\n          return React.createElement(\"tr\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 130\n            },\n            __self: this\n          }, React.createElement(\"td\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 130\n            },\n            __self: this\n          }, \"loading active liquidations\"), React.createElement(\"td\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 130\n            },\n            __self: this\n          }));\n        }\n      } else {\n        return React.createElement(\"tr\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 132\n          },\n          __self: this\n        }, React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 132\n          },\n          __self: this\n        }, \"No active liquidations \"), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 133\n          },\n          __self: this\n        }), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 133\n          },\n          __self: this\n        }));\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      return React.createElement(React.Fragment, null, React.createElement(\"div\", {\n        className: \"content\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139\n        },\n        __self: this\n      }, React.createElement(Row, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140\n        },\n        __self: this\n      }, React.createElement(Col, {\n        md: \"12\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141\n        },\n        __self: this\n      }, React.createElement(Card, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142\n        },\n        __self: this\n      }, React.createElement(CardHeader, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143\n        },\n        __self: this\n      }, React.createElement(CardTitle, {\n        tag: \"h4\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144\n        },\n        __self: this\n      }, \"Active Liquidation Positions\")), React.createElement(Col, {\n        md: \"12\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146\n        },\n        __self: this\n      }, React.createElement(CardBody, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147\n        },\n        __self: this\n      }, React.createElement(Table, {\n        className: \"tablesorter\",\n        responsive: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148\n        },\n        __self: this\n      }, React.createElement(\"thead\", {\n        className: \"text-primary\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149\n        },\n        __self: this\n      }, React.createElement(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150\n        },\n        __self: this\n      }, React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151\n        },\n        __self: this\n      }, \"ID\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152\n        },\n        __self: this\n      }, \"Owner\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 153\n        },\n        __self: this\n      }, \"Owners ID\"))), React.createElement(\"tbody\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 156\n        },\n        __self: this\n      }, this.renderTableActiveLiqData())), \"Current rate: \", (this.props.rateUSD / Math.pow(10, 2)).toLocaleString(undefined, {\n        minimumFractionDigits: 2,\n        maximumFractionDigits: 2\n      }), \" USD\"))))), React.createElement(Row, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 168\n        },\n        __self: this\n      }, React.createElement(Col, {\n        lg: \"6\",\n        md: \"12\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 169\n        },\n        __self: this\n      }, React.createElement(Card, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 170\n        },\n        __self: this\n      }, React.createElement(CardHeader, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171\n        },\n        __self: this\n      }, React.createElement(CardTitle, {\n        tag: \"h4\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 172\n        },\n        __self: this\n      }, \"Liquidation groups\")), React.createElement(CardBody, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 174\n        },\n        __self: this\n      }, React.createElement(Table, {\n        className: \"tablesorter\",\n        responsive: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 175\n        },\n        __self: this\n      }, React.createElement(\"thead\", {\n        className: \"text-primary\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 176\n        },\n        __self: this\n      }, React.createElement(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 177\n        },\n        __self: this\n      }, React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 178\n        },\n        __self: this\n      }, \"Liquidation amount\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 179\n        },\n        __self: this\n      }, \"Total CPs\"))), React.createElement(\"tbody\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 182\n        },\n        __self: this\n      }, this.renderTableGroupData()))))))), React.createElement(Modal, {\n        modalClassName: \"modal-mini modal-danger modal-mini\",\n        isOpen: this.state.miniModal,\n        toggle: function toggle() {\n          return _this3.toggleModal(\"miniModal\");\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 192\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"modal-header justify-content-center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 197\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        className: \"close\",\n        onClick: function onClick() {\n          return _this3.toggleModal(\"miniModal\");\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 198\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"tim-icons icon-simple-remove text-white\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 202\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"modal-profile\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 204\n        },\n        __self: this\n      }, React.createElement(\"h3\", {\n        className: \"mb-0\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 205\n        },\n        __self: this\n      }, \"Remove Collateral position\"))), React.createElement(\"div\", {\n        className: \"modal-body text-center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 210\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 211\n        },\n        __self: this\n      }), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 212\n        },\n        __self: this\n      }, \"Tokens burn: \", (this.state.userCP[1] / Math.pow(10, 20)).toLocaleString(undefined, {\n        minimumFractionDigits: 2,\n        maximumFractionDigits: 2\n      }), \" \"), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 215\n        },\n        __self: this\n      }, \"ETH available: \", (this.state.userCP[0] / Math.pow(10, 18)).toLocaleString(undefined, {\n        minimumFractionDigits: 2,\n        maximumFractionDigits: 2\n      }))), React.createElement(\"div\", {\n        className: \"modal-footer\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 220\n        },\n        __self: this\n      }, React.createElement(Button, {\n        className: \"btn-neutral\",\n        color: \"link\",\n        type: \"button\",\n        onClick: this.liquidateCP,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 221\n        },\n        __self: this\n      }, \"Liquidate\"), React.createElement(Button, {\n        className: \"btn-neutral\",\n        color: \"link\",\n        onClick: function onClick() {\n          return _this3.toggleModal(\"miniModal\");\n        },\n        type: \"button\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 229\n        },\n        __self: this\n      }, \"Cancel\"))));\n    }\n  }]);\n\n  return Liquidations;\n}(React.Component);\n\nexport default Liquidations;","map":{"version":3,"sources":["/Users/kevinfoesenek/Desktop/LinkedFC_frontend/src/views/Liquidations.jsx"],"names":["React","Button","Card","CardHeader","CardBody","CardTitle","Row","Col","Table","Modal","Liquidations","props","toggleModal","modalState","owner","id","web3","instanceColl","setState","state","undefined","web3Available","eth","getCoinbase","then","result","methods","CP","call","userCP","liquidateCP","dataMiniModal","send","from","liqActive","miniModal","liqRange","liqrate","rateUSD","i","liqGroups","length","n","_LiqInfo","concat","rows","loop","rowsActive","index","bind","renderTableActiveLiqData","toLocaleString","minimumFractionDigits","maximumFractionDigits","renderTableGroupData","Component"],"mappings":"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","sourcesContent":["/*!\n\n=========================================================\n* Black Dashboard React v1.0.0\n=========================================================\n\n* Product Page: https://www.creative-tim.com/product/black-dashboard-react\n* Copyright 2019 Creative Tim (https://www.creative-tim.com)\n* Licensed under MIT (https://github.com/creativetimofficial/black-dashboard-react/blob/master/LICENSE.md)\n\n* Coded by Creative Tim\n\n=========================================================\n\n* The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\n\n*/\nimport React from \"react\";\n\nimport {\n  Button,\n  Card,\n  CardHeader,\n  CardBody,\n  CardTitle,\n  Row,\n  Col,\n  Table,\n  Modal,\n} from \"reactstrap\";\n\nclass Liquidations extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      liqActive: [],\n      miniModal: false,\n      userCP: \"\",\n      liqRange: [],\n    };\n  }\n  componentDidMount() {\n    var liqrate = this.props.rateUSD/1000\n    if (this.props.web3Available === \"true\") {\n      for (var i = liqrate; i < this.props.liqGroups.length; i++) {\n        if (this.props.liqGroups[i] > 0){\n          for (var n = 0; n < this.props.liqGroups[i]; n++) {\n            this.props.instanceColl.methods._LiqInfo(i, (n + 1)\n              ).call().then((result =>\n              this.setState({\n                liqActive: this.state.liqActive.concat(result),\n              })))}}}}\n  }\n  toggleModal = (modalState, owner, id) => {\n    const web3 = this.props.web3;\n    const instanceColl = this.props.instanceColl;\n    this.setState({\n      [modalState]: !this.state[modalState],\n      dataMiniModal: [owner, id]\n    });\n    if (owner !== undefined && id !== undefined) {\n      if (this.props.web3Available !== \"false\") {\n        web3.eth.getCoinbase().then(result =>\n          instanceColl.methods.CP(owner, id).call().then(\n            (result => this.setState({userCP: result}))\n      ))};\n    }\n  };\n  liquidateCP = (owner, id) => {\n     const web3 = this.props.web3;\n     const instanceColl = this.props.instanceColl;\n     if (this.props.web3Available !== \"false\") {\n       web3.eth.getCoinbase().then(result =>\n         instanceColl.methods.liquidateCP(this.state.dataMiniModal[0],\n                                          this.state.dataMiniModal[1]).send(\n                                          {from: result,}))};\n   };\n  renderTableGroupData() {\n    var rows = [];\n    if (this.props.loop === 49) {\n     for (var i = 0; i < this.props.liqGroups.length; i++) {\n      if (this.props.liqGroups[i] > 0){\n        rows[i] = (\n          <tr key={i}>\n\n            <td>{i*10} - {(i + 1) *10} USD</td>\n            <td>{this.props.liqGroups[i]} CPs</td>\n          </tr>\n        )};\n    }\n    return (rows);\n  } else {return(<tr><td>loading liquidation groups</td><td/></tr>)}\n  }\n\n  renderTableActiveLiqData() {\n    var rowsActive = [];\n    var liqrate = this.props.rateUSD/1000\n    var index = 0;\n      for (var i = liqrate; i < this.props.liqGroups.length; i++) {\n        if (this.props.liqGroups[i] > 0){\n          index = index + (this.props.liqGroups[i] * 1);\n        }\n      }\n\n        if (index > 0) {\n          if (this.props.loop === 49) {\n          for (var n = 0; n < index; n++) {\n              rowsActive[n] = (\n                  <tr key={n}>\n                      <td>{n+1}</td>\n                      {this.state.liqActive[n] !== undefined ?\n                        (<td>{this.state.liqActive[n][1]}</td>):(<td></td>)}\n\n                      {this.state.liqActive[n] !== undefined ?\n                        (<td>{(this.state.liqActive[n][0] * 1) + 1}</td>):(<td></td>)}\n                      {this.state.liqActive[n] !== undefined ?\n                        (<td>\n                          <Button\n                          className=\"btn-link tim-icons icon-simple-remove\"\n                          color=\"danger\"\n                          onClick={this.toggleModal.bind(\"\", \"miniModal\",\n                                        this.state.liqActive[n][1],\n                                        this.state.liqActive[n][0])}\n                          />\n                        </td>\n                        ):(<td></td>)}\n                  </tr>);\n        }\n          return (rowsActive);\n        } else {return(<tr><td>loading active liquidations</td><td/></tr>)}\n      } else {\n        return (<tr><td>No active liquidations </td>\n                <td></td><td></td></tr>)\n      }\n  }\n  render() {\n    return (\n      <>\n        <div className=\"content\">\n        <Row>\n        <Col md=\"12\">\n          <Card>\n            <CardHeader>\n              <CardTitle tag=\"h4\">Active Liquidation Positions</CardTitle>\n            </CardHeader>\n            <Col md=\"12\">\n            <CardBody>\n              <Table className=\"tablesorter\" responsive>\n                <thead className=\"text-primary\">\n                  <tr>\n                    <th>ID</th>\n                    <th>Owner</th>\n                    <th>Owners ID</th>\n                  </tr>\n                </thead>\n                <tbody>\n                {this.renderTableActiveLiqData()}\n                </tbody>\n              </Table>\n              Current rate: {(this.props.rateUSD/10**2).toLocaleString(\n                          undefined, {minimumFractionDigits: 2,\n                                      maximumFractionDigits:2})} USD\n            </CardBody>\n          </Col>\n          </Card>\n        </Col>\n        </Row>\n        <Row>\n        <Col lg=\"6\" md=\"12\">\n          <Card>\n            <CardHeader>\n              <CardTitle tag=\"h4\">Liquidation groups</CardTitle>\n            </CardHeader>\n              <CardBody>\n              <Table className=\"tablesorter\" responsive>\n                <thead className=\"text-primary\">\n                  <tr>\n                    <th>Liquidation amount</th>\n                    <th>Total CPs</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {this.renderTableGroupData()}\n                </tbody>\n              </Table>\n              </CardBody>\n          </Card>\n        </Col>\n        </Row>\n        </div>\n        {/* Start Mini Modal */}\n          <Modal\n            modalClassName=\"modal-mini modal-danger modal-mini\"\n            isOpen={this.state.miniModal}\n            toggle={() => this.toggleModal(\"miniModal\")}\n          >\n            <div className=\"modal-header justify-content-center\">\n              <button\n                className=\"close\"\n                onClick={() => this.toggleModal(\"miniModal\")}\n              >\n                <i className=\"tim-icons icon-simple-remove text-white\" />\n              </button>\n              <div className=\"modal-profile\">\n              <h3 className=\"mb-0\">\n                Remove Collateral position\n              </h3>\n              </div>\n            </div>\n            <div className=\"modal-body text-center\">\n              <div/>\n              <p>Tokens burn: {(this.state.userCP[1]/10**20).toLocaleString(\n                        undefined, {minimumFractionDigits: 2,\n                                    maximumFractionDigits:2})} </p>\n              <p>ETH available: {(this.state.userCP[0]/10**18).toLocaleString(\n                        undefined, {minimumFractionDigits: 2,\n                                    maximumFractionDigits:2})}</p>\n            </div>\n\n            <div className=\"modal-footer\">\n              <Button\n                className=\"btn-neutral\"\n                color=\"link\"\n                type=\"button\"\n                onClick={this.liquidateCP}\n              >\n              Liquidate\n              </Button>\n              <Button\n                className=\"btn-neutral\"\n                color=\"link\"\n                onClick={() => this.toggleModal(\"miniModal\")}\n                type=\"button\"\n              >\n                Cancel\n              </Button>\n            </div>\n          </Modal>\n          {/* End Mini Modal */}\n      </>\n    );\n  }\n}\n\nexport default Liquidations;\n"]},"metadata":{},"sourceType":"module"}